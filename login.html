<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Login (Full Screen Loader)</title>
  <style>
    /* 🎨 CSS Styling: Variables and Base */
    :root {
      --color-dark: #253528;
      --color-medium: #49654E;
      --color-light: #8BA889;
      --accent-color: #e6b543;
      --loader-green: #008000; /* لون أخضر غامق للودر */

      --success-color: #28a745;
      --danger-color: #dc3545;
      --text-color: #ffffff;
      --box-bg-transparency: rgba(255, 255, 255, 0.15);
      --border-radius: 12px;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: var(--text-color);
      background: linear-gradient(135deg, var(--color-dark) 3%, var(--color-medium) 38%, var(--color-light));
      overflow: hidden; /* لمنع ظهور شريط التمرير عند التحميل */
    }

    #progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 6px;
      background: linear-gradient(to right, #dee77a, #ffaf1a);
      z-index: 1000;
      transition: width 0.3s ease;
    }

    .container {
      width: 100%;
      height: 100vh;
      background-image: url("images/b.jpg");
      background-color: var(--color-dark);
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      transition: opacity 0.3s ease; /* لإضافة انتقال عند الإخفاء */
    }

    /* 🌟 FULL SCREEN LOADER STYLES */
    #full-page-loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white; /* شاشة بيضاء */
      display: none; /* يتم إظهاره فقط عند الحاجة */
      justify-content: center;
      align-items: center;
      z-index: 2000; /* يجب أن يكون فوق كل شيء */
      flex-direction: column;
    }

    .loader-spinner {
      border: 8px solid #f3f3f3; /* لون خفيف لخلفية الدائرة */
      border-top: 8px solid var(--loader-green); /* لون أخضر غامق للحركة */
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    .loader-message {
      color: var(--color-dark); /* نص رسالة التحميل */
      font-size: 1.2rem;
      font-weight: 600;
    }

    /* ⚙️ Loader Animation */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .login-container {
      background-color: var(--box-bg-transparency);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      padding: 40px;
      border-radius: var(--border-radius);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
      width: 100%;
      max-width: 400px;
      text-align: center;
      box-sizing: border-box;
    }

    /* --- Headings --- */
    h2 {
      color: var(--accent-color);
      margin-bottom: 30px;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    /* --- Form Group Styling --- */
    .form-group {
      margin-bottom: 25px;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 1rem;
      color: var(--accent-color);
    }

    input[type="text"],
    input[type="password"] {
      width: 100%;
      padding: 14px;
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: var(--text-color);
      border-radius: var(--border-radius);
      box-sizing: border-box;
      font-size: 1rem;
      transition: border-color 0.3s ease, background-color 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
      background-color: rgba(255, 255, 255, 0.2);
      border-color: var(--color-light);
      outline: none;
    }

    /* --- Button Styling --- */
    .btn {
      background-color: var(--color-light);
      color: var(--color-dark);
      padding: 14px 25px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1.1rem;
      width: 100%;
      transition: background-color 0.3s ease, transform 0.1s ease, color 0.3s ease;
      font-weight: 700;
      margin-top: 15px;
      position: static;
      overflow: visible;
    }

    .btn:hover {
      background-color: var(--accent-color);
      color: var(--color-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    /* --- Message Area Styling --- */
    #message {
      margin-top: 30px;
      padding: 12px;
      border-radius: var(--border-radius);
      font-weight: 600;
      text-align: center;
      display: none;
      color: var(--color-dark);
    }

    .success {
      background-color: #c3e6cb;
      color: var(--success-color);
      border: 1px solid var(--success-color);
    }

    .error {
      background-color: #f5c6cb;
      color: var(--danger-color);
      border: 1px solid var(--danger-color);
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <div class="container" id="mainContainer">
    <div class="login-container">
      <h2>🔒 User Login</h2>
      <form id="loginForm">
        <div class="form-group">
          <label for="username">Username:</label>
          <input
            type="text"
            id="username"
            name="username"
            required
            autocomplete="username"
            placeholder=" use 'admin'"
          />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            autocomplete="current-password"
            placeholder=" use '123'"
          />
        </div>
        <button type="submit" class="btn" id="loginButton">Log In</button>
        <div id="message"></div>
      </form>
    </div>
  </div>

  <div id="full-page-loader">
    <div class="loader-spinner"></div>
    <div class="loader-message" id="loaderMessage">Verifying Credentials...</div>
  </div>

  <script>
    // Scroll Progress Bar Logic
    window.addEventListener("scroll", () => {
      const scrollTop = window.pageYOffset;
      const docHeight =
        document.documentElement.scrollHeight - window.innerHeight;
      const scrollPercent = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
      document.getElementById("progress-bar").style.width =
        scrollPercent + "%";
    });

    // Users Data
    const users = [
      { username: "admin", password: "123" },
      { username: "john.doe", password: "pass" },
      { username: "susan.smith", password: "abc" },
      { username: "michael.b", password: "mb456" },
      { username: "emily.w", password: "ew789" },
      { username: "david.lee", password: "dl111" },
      { username: "sarah.k", password: "sk222" },
      { username: "chris.p", password: "cp333" },
      { username: "anna.f", password: "af444" },
      { username: "jason.r", password: "jr555" },
      { username: "maria.g", password: "mg666" },
      { username: "peter.h", password: "ph777" },
      { username: "olivia.m", password: "om888" },
      { username: "kevin.t", password: "kt999" },
      { username: "nicole.x", password: "nx000" },
      { username: "robert.l", password: "rl121" },
      { username: "laura.d", password: "ld343" },
      { username: "eric.f", password: "ef565" },
      { username: "monica.v", password: "mv787" },
      { username: "alex.z", password: "az909" },
      { username: "testuser", password: "test" },
      { username: "developer", password: "dev" }
    ];

    // Get references
    const loginForm = document.getElementById("loginForm");
    const usernameInput = document.getElementById("username");
    const passwordInput = document.getElementById("password");
    const messageDiv = document.getElementById("message");
    const mainContainer = document.getElementById("mainContainer");
    const fullPageLoader = document.getElementById("full-page-loader");
    const loaderMessage = document.getElementById("loaderMessage");

    function displayMessage(msg, type) {
      messageDiv.textContent = msg;
      messageDiv.className = "";
      messageDiv.classList.add(type);
      messageDiv.style.display = "block";
    }

    function handleLogin(event) {
      event.preventDefault();

      // إخفاء رسالة الخطأ السابقة
      messageDiv.style.display = 'none';

      const enteredUsername = usernameInput.value.trim();
      const enteredPassword = passwordInput.value.trim();

      // تعطيل الزر لمنع النقر المتكرر
      loginForm.querySelector('.btn').disabled = true;

      // 1. إخفاء نموذج تسجيل الدخول وإظهار شاشة التحميل بملء الشاشة
      mainContainer.style.opacity = '0';
      loaderMessage.textContent = "Verifying Credentials..."; // إعادة ضبط الرسالة

      setTimeout(() => {
        mainContainer.style.display = 'none';
        fullPageLoader.style.display = 'flex'; // إظهار شاشة التحميل
      }, 300); // 300ms للانتهاء من تأثير الإخفاء

      // 2. محاكاة تأخير 3 ثوانٍ
      setTimeout(() => {

        // 3. التحقق من البيانات
        const foundUser = users.find(
          (user) =>
            user.username === enteredUsername &&
            user.password === enteredPassword
        );

        if (foundUser) {
          loaderMessage.textContent = "Authentication Successful! Redirecting..."; // تحديث رسالة النجاح

          // 4. تأخير التوجيه النهائي (ثانية واحدة)
          setTimeout(() => {
            window.location.href = "index.html"; // التوجيه للصفحة المطلوبة
          }, 1000);

        } else {
          // 4. معالجة الفشل (إخفاء الـ Loader، إظهار النموذج مع رسالة الخطأ)
          fullPageLoader.style.display = 'none';

          mainContainer.style.display = 'flex';
          // تأخير بسيط لضمان ظهور الـ div قبل تطبيق الشفافية
          setTimeout(() => {
            mainContainer.style.opacity = '1';
          }, 10);

          // إعادة تفعيل الزر
          loginForm.querySelector('.btn').disabled = false;

          displayMessage(
            "❌ Invalid Username or Password. Please try again.",
            "error"
          );
        }
      }, 3000); // 3 ثواني مدة التحميل
    }

    loginForm.addEventListener("submit", handleLogin);
  </script>
</body>
</html>
